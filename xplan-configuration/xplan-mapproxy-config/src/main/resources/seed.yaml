seeds:
  bpreseed_25832:
    caches: [bplan_raster_cache_25832,bplan_vektor_cache_25832]
    coverages: [bpchanges]
    refresh_before:
      days: 0
  fpreseed_25832:
    caches: [fplan_raster_cache_25832,fplan_vektor_cache_25832]
    coverages: [fpchanges]
    refresh_before:
      days: 0
  lpreseed_25832:
    caches: [lplan_raster_cache_25832,lplan_vektor_cache_25832]
    coverages: [lpchanges]
    refresh_before:
      days: 0
  rpreseed_25832:
    caches: [rplan_raster_cache_25832,rplan_vektor_cache_25832]
    coverages: [rpchanges]
    refresh_before:
      days: 0
  soreseed_25832:
    caches: [soplan_raster_cache_25832,soplan_vektor_cache_25832]
    coverages: [sochanges]
    refresh_before:
      days: 0
  bpreseed_3857:
    caches: [bplan_raster_cache_3857,bplan_vektor_cache_3857]
    coverages: [bpchanges]
    refresh_before:
      days: 0
  fpreseed_3857:
    caches: [fplan_raster_cache_3857,fplan_vektor_cache_3857]
    coverages: [fpchanges]
    refresh_before:
      days: 0
  lpreseed_3857:
    caches: [lplan_raster_cache_3857,lplan_vektor_cache_3857]
    coverages: [lpchanges]
    refresh_before:
      days: 0
  rpreseed_3857:
    caches: [rplan_raster_cache_3857,rplan_vektor_cache_3857]
    coverages: [rpchanges]
    refresh_before:
      days: 0
  soreseed_3857:
    caches: [soplan_raster_cache_3857,soplan_vektor_cache_3857]
    coverages: [sochanges]
    refresh_before:
      days: 0
  # wird bei einem frischen Deployment vermutlich gar nicht benötigt?
  fullseed_25832:
    caches: [bplan_raster_cache_25832,bplan_vektor_cache_25832,fplan_raster_cache_25832,fplan_vektor_cache_25832,lplan_raster_cache_25832,lplan_vektor_cache_25832,rplan_raster_cache_25832,rplan_vektor_cache_25832,soplan_raster_cache_25832,soplan_vektor_cache_25832]
    coverages: [full]
    refresh_before:
      days: 0
  fullseed_3857:
    caches: [bplan_raster_cache_3857,bplan_vektor_cache_3857,fplan_raster_cache_3857,fplan_vektor_cache_3857,lplan_raster_cache_3857,lplan_vektor_cache_3857,rplan_raster_cache_3857,rplan_vektor_cache_3857,soplan_raster_cache_3857,soplan_vektor_cache_3857]
    coverages: [full]
    refresh_before:
      days: 0
coverages:
  bpchanges:
    # da die Connection mit PQconnectdb()/libpq gemacht wird, müssten alle Verbindungsparameter über ENVs gesetzt werden können: https://www.postgresql.org/docs/12/libpq-envars.html (ungetestet)
    datasource: "PG:"
    where: "select * from xplanmgr.planslog where xp_type='BP_Plan' and (planstatus_new='Festgestellt' or planstatus_old='Festgestellt') and last_update_date > localtimestamp - interval '1 day'"
    srs: 'EPSG:4326'
  fpchanges:
    datasource: "PG:"
    where: "select * from xplanmgr.planslog where xp_type='FP_Plan' and (planstatus_new='Festgestellt' or planstatus_old='Festgestellt') and last_update_date > localtimestamp - interval '1 day'"
    srs: 'EPSG:4326'
  lpchanges:
    datasource: "PG:"
    where: "select * from xplanmgr.planslog where xp_type='LP_Plan' and (planstatus_new='Festgestellt' or planstatus_old='Festgestellt') and last_update_date > localtimestamp - interval '1 day'"
    srs: 'EPSG:4326'
  rpchanges:
    datasource: "PG:"
    where: "select * from xplanmgr.planslog where xp_type='RP_Plan' and (planstatus_new='Festgestellt' or planstatus_old='Festgestellt') and last_update_date > localtimestamp - interval '1 day'"
    srs: 'EPSG:4326'
  sochanges:
    datasource: "PG:"
    where: "select * from xplanmgr.planslog where xp_type='SO_Plan' and (planstatus_new='Festgestellt' or planstatus_old='Festgestellt') and last_update_date > localtimestamp - interval '1 day'"
    srs: 'EPSG:4326'
  full:
    bbox: [${XPLAN_SERVICES_BBOX_4326}]
    srs: 'EPSG:4326'