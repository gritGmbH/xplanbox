<?xml version="1.0" encoding="UTF-8"?>
<!--
  #%L
  xplan-tests-soapui - SoapUI-Tests
  %%
  Copyright (C) 2008 - 2024 Freie und Hansestadt Hamburg, developed by lat/lon gesellschaft fÃ¼r raumbezogene Informationssysteme mbH
  %%
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  #L%
  -->
<con:soapui-project id="d87c2df2-24ee-4f03-93eb-b6af824e4cc9" activeEnvironment="Default" name="xplan-loadtests" resourceRoot="" soapui-version="5.7.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config">
  <con:settings/>
  <con:testSuite id="701c0614-03fd-48eb-87a0-3bf0acbc151a" name="ImportAndPlanList">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase id="9a7ae5bb-87a8-4045-b8f9-33434ebbf974" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Import" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
      <con:settings/>
      <con:testStep type="httprequest" name="Import BPlan004_6-0.zip" id="a5761ba1-2511-42b6-8e5b-9277e9d15293">
        <con:settings/>
        <con:config method="POST" xsi:type="con:HttpRequest" id="81e086dd-d7e1-453d-b813-a19540c01243" name="Import BPlan004_6-0.zip" mediaType="application/octet-stream" postQueryString="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#baseUrlManagerApi}/xmanager/api/v1/plan</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" id="801e8b11-7329-4cf3-bdad-a11ed56f57c5" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>201</codes>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:username>${#Project#username}</con:username>
            <con:password>${#Project#password}</con:password>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
            <con:preemptive>true</con:preemptive>
            <con:authType>Preemptive</con:authType>
          </con:credentials>
          <con:attachment>
            <con:name>BPlan002_5-3.zip</con:name>
            <con:contentType>application/octet-stream</con:contentType>
            <con:contentId>BPlan004_6-0.zip</con:contentId>
            <con:url>${projectDir}/xplan-loadtests/plans/BPlan004_6-0.zip</con:url>
            <con:id>f4992d26-e700-4ffd-87cc-39551e589e8c</con:id>
          </con:attachment>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <con:parameter>
              <con:name>skipSemantisch</con:name>
              <con:value>true</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>skipFlaechenschluss</con:name>
              <con:value>true</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
            <con:parameter>
              <con:name>skipGeltungsbereich</con:name>
              <con:value>true</con:value>
              <con:style>QUERY</con:style>
            </con:parameter>
          </con:parameters>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Property Transfer" id="ae303dc2-adc7-44ac-9d4d-d77ef13953e0" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
            <con:name>planId</con:name>
            <con:sourceType>Response</con:sourceType>
            <con:sourceStep>Import BPlan004_6-0.zip</con:sourceStep>
            <con:sourcePath>$.id</con:sourcePath>
            <con:targetType>planId</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
            <con:type>JSONPATH</con:type>
            <con:targetTransferType>JSONPATH</con:targetTransferType>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="httprequest" name="Delete BPlan004_6-0.zip" id="df172cac-6abe-469a-9fbb-e389f6355bc5" disabled="true">
        <con:settings/>
        <con:config method="DELETE" xsi:type="con:HttpRequest" id="81e086dd-d7e1-453d-b813-a19540c01243" name="Delete BPlan004_6-0.zip" mediaType="application/octet-stream" postQueryString="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#baseUrlManagerApi}/xmanager/api/v1/plan/${#TestCase#planId}</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" id="801e8b11-7329-4cf3-bdad-a11ed56f57c5" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:username>${#Project#username}</con:username>
            <con:password>${#Project#password}</con:password>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Cleanup Properties" id="6466e518-9b4e-4a23-ae17-2ba9419b5ec9" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
            <con:name>planId</con:name>
            <con:sourceType>planId</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>planId</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
            <con:type>XPATH</con:type>
            <con:targetTransferType>XPATH</con:targetTransferType>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:loadTest id="6a416de3-c380-4ce7-a3e6-47a60dbbd113" name="ImportXPlans">
        <con:settings/>
        <con:threadCount>1</con:threadCount>
        <con:startDelay>0</con:startDelay>
        <con:sampleInterval>250</con:sampleInterval>
        <con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed>
        <con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange>
        <con:historyLimit>-1</con:historyLimit>
        <con:testLimit>500</con:testLimit>
        <con:limitType>COUNT</con:limitType>
        <con:loadStrategy>
          <con:type>Simple</con:type>
        </con:loadStrategy>
        <con:assertion type="Step Status" name="Step Status"/>
        <con:maxAssertionErrors>100</con:maxAssertionErrors>
        <con:cancelExcessiveThreads>true</con:cancelExcessiveThreads>
        <con:strategyInterval>500</con:strategyInterval>
      </con:loadTest>
      <con:properties>
        <con:property>
          <con:name>planId</con:name>
          <con:value>523</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase id="ede2647d-1294-4331-bef0-63807f568b53" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="XPlanManagerWeb-PlanList" searchProperties="true">
      <con:settings/>
      <con:testStep type="httprequest" name="XPlanManagerPlans" id="1132c36b-e057-4899-971c-f4af4fc539fc">
        <con:settings/>
        <con:config method="GET" xsi:type="con:HttpRequest" id="85bb88dd-5a1c-4cb3-bc6f-3d5b67ef0fa1" name="XPlanManagerPlans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>${#Project#baseUrlManagerWeb}/xplan-manager-web/xplanmgrweb/rest/manager/plans</con:endpoint>
          <con:request/>
          <con:assertion type="Valid HTTP Status Codes" id="39c93ebf-5e00-4cb5-af30-34b35e8d3e3d" name="Valid HTTP Status Codes">
            <con:configuration>
              <codes>200</codes>
            </con:configuration>
          </con:assertion>
          <con:credentials>
            <con:username>${#Project#username}</con:username>
            <con:password>${#Project#password}</con:password>
            <con:domain/>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:config>
      </con:testStep>
      <con:loadTest id="fdc225b9-739d-4233-8b81-89084474625e" name="GetPlans">
        <con:settings/>
        <con:threadCount>5</con:threadCount>
        <con:startDelay>0</con:startDelay>
        <con:sampleInterval>250</con:sampleInterval>
        <con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed>
        <con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange>
        <con:historyLimit>-1</con:historyLimit>
        <con:testLimit>60</con:testLimit>
        <con:limitType>TIME</con:limitType>
        <con:loadStrategy>
          <con:type>Simple</con:type>
        </con:loadStrategy>
        <con:assertion type="Step Status" name="Step Status"/>
        <con:assertion type="Step Average" name="Step Average">
          <con:configuration>
            <name>Step Average</name>
            <min-requests>1</min-requests>
            <max-average>500</max-average>
            <test-step>XPlanManagerPlans</test-step>
            <max-errors>-1</max-errors>
            <sample-interval>20</sample-interval>
          </con:configuration>
        </con:assertion>
        <con:maxAssertionErrors>100</con:maxAssertionErrors>
        <con:cancelExcessiveThreads>true</con:cancelExcessiveThreads>
        <con:strategyInterval>500</con:strategyInterval>
      </con:loadTest>
      <con:properties/>
    </con:testCase>
    <con:properties/>
  </con:testSuite>
  <con:properties>
    <con:property>
      <con:name>baseUrlManagerApi</con:name>
      <con:value>http://localhost:8086/xplan-manager-api</con:value>
    </con:property>
    <con:property>
      <con:name>baseUrlManagerWeb</con:name>
      <con:value>http://localhost:8082</con:value>
    </con:property>
    <con:property>
      <con:name>username</con:name>
      <con:value/>
    </con:property>
    <con:property>
      <con:name>password</con:name>
      <con:value/>
    </con:property>
  </con:properties>
  <con:wssContainer/>
  <con:oAuth2ProfileContainer/>
  <con:oAuth1ProfileContainer/>
  <con:sensitiveInformation/>
</con:soapui-project>